(function(b){var a=function(d){var c=/^\d*$/;return c.test(d)};b.fn.pager=function(e){function d(f,g){this.render=function(){if(f.pageNumber>f.pageCount){return}var k=b("<ul></ul>");var j=f.item;for(var h=0;h<j.length;h++){k.append(this.handler(j[h]))}return k};this.handler=function(h){switch(h){case"recordCount":var i=f.text.recordCount;i=i.replace(/{#recordCount}/g,f.recordCount);return b('<li class="recordCount">'+i+"</li>");case"first":case"pre":case"next":case"last":return this.renderButton(h);case"pageCount":var i=f.text.pageCount;i=i.replace(/{#pageCount}/g,f.pageCount);return b('<li class="pageCount">'+i+"</li>");case"qpage":return this.renderQPages();case"pageSizer":return this.renderPageSizer();case"quickPager":return this.renderQuickPager();default:return'<li class="text">'+h+"</li>"}};this.renderButton=function(j){var l=1;var i=f.text[j];switch(j){case"first":l=1;break;case"pre":l=f.pageNumber-1;break;case"next":l=f.pageNumber+1;break;case"last":l=f.pageCount;break;case"pageCount":l=f.pageCount;break}var k=new RegExp("{#"+j+"}","gi");i=i.replace(k,l);var h=b('<li class="pgNext link '+j+'">'+i+"</li>");if(j=="first"||j=="pre"){f.pageNumber<=1?h.addClass(j+"-empty"):h.bind("click",{E:this},function(m){m.data.E.callBack(l)})}else{f.pageNumber>=f.pageCount?h.addClass(j+"-empty"):h.bind("click",{E:this},function(m){m.data.E.callBack(l)})}return h};this.renderQPages=function(){var o=f.text.qpage;var h=b("<span class='qpages'></span>");var m=1;var l=f.qpageSize;var k=parseInt(l/2);if(f.pageNumber>k){m=f.pageNumber-k;l=f.pageNumber+k}if(l>f.pageCount){m=f.pageCount-k*2;l=f.pageCount}if(m<1){m=1}for(var n=m;n<=l;n++){var i=b('<li class="page-number link">'+o.replace(/{#qpage}/g,n)+"</li>");n==f.pageNumber?i.addClass("pgCurrent"):i.bind("click",{E:this},function(p){p.data.E.callBack(this.firstChild.data)});i.appendTo(h)}if(f.pageCount>f.qpageSize){h.append('<li class="text">...</li>');var j=b('<li class="page-number link page-number-last">'+o.replace(/{#qpage}/g,f.pageCount)+"</li>");f.pageNumber>=f.pageCount?j.addClass("pgEmpty"):j.bind("click",{E:this},function(p){p.data.E.callBack(f.pageCount)});h.append(j)}return h};this.renderQuickPager=function(){if(f.pageCount<=1){return null}var h=null;var l=b('<li class="text quickPager"></li>');if(f.pageCount<=10){var k="<select>";for(var j=1;j<=f.pageCount;j++){k+='<option value="'+j+'"';if(j==f.pageNumber){k+=" selected"}k+=">"+j+"</option>"}k+="</select>";h=b(k);h.bind("change",{E:this},function(i){i.data.E.callBack(b(this).attr("value"))})}else{h=b('<span class="fl">\u7b2c</span><div id="chatpage"><input id="quickPager" class="pagenum fl" value="'+f.pageNumber+'" style="width:'+(f.pageNumber.toString().length+1)*10+'px;"><a id="enter" class="enter fl" href="javascript:void(0)"></a></div><span class="fl">&nbsp;/'+f.pageCount+"&nbsp;\u9875</span>");h.find("#quickPager").bind("keypress",{E:this},function(n){var i=n.data.E;if(n.keyCode==13){var m=b(this).attr("value");if(!a(m)){alert("\u8bf7\u8f93\u5165\u6570\u5b57\uff01");return false}if(parseInt(m)>f.pageCount){alert("\u6700\u5927\u9875\u6570\u4e3a"+f.pageCount+"\uff01");return false}i.callBack(m);return false}});h.find("a#enter").bind("click",{E:this},function(n){var i=n.data.E;var m=h.find("#quickPager").attr("value");if(!a(m)){alert("\u8bf7\u8f93\u5165\u6570\u5b57\uff01");return false}if(parseInt(m)>f.pageCount){alert("\u6700\u5927\u9875\u6570\u4e3a"+f.pageCount+"\uff01");return false}i.callBack(m);return false})}l.append(h);return l};this.renderPageSizer=function(){var k;if(f.rowList){var m=f.text.pageSizer;m=m.replace(/{#pageSizer}/g,'</span><div id="select" class="fl"></div><span class="fl">');k=b('<li class="text pageSizer"><span class="fl">'+m+"</span></li>");var l='<select name="pageSize">';for(var j=0;j<f.rowList.length;j++){l+='<option value="'+f.rowList[j]+'"';if(f.rowList[j]==f.pageSize){l+=" selected"}l+=">"+f.rowList[j]+"</option>"}l+="</select>";var h=b(l);h.bind("change",{E:this},function(i){if(f.pageSize==this.value){return}f.pageSize=this.value;i.data.E.callBack(f.pageNumber)});b("#select",k).append(h)}return k};this.callBack=function(h){if(typeof(h)!="number"){h=parseInt(h)}if(h){f.pageNumber=h}if(typeof(f.callBack)=="function"){f.callBack(f)}};g.empty().append(this.render())}var c={pageNumber:1,pageCount:1,pageSize:null,recordCount:0,qpageSize:9,rowList:null,text:{recordCount:"\u603b\u6570\u76ee:{#recordCount}",first:"\u9996\u9875",pre:"\u4e0a\u4e00\u9875",qpage:"{#qpage}",pageCount:"{#pageCount}",next:"\u4e0b\u4e00\u9875",last:"\u672b\u9875",pageSizer:"\u6bcf\u9875{#pageSizer}/\u884c"},item:["recordCount","first","pre","qpage","next","quickPager"]};e.text=b.extend({},c.text,e.text);e=b.extend({},c,e);return this.each(function(){new d(e,b(this))})}})(jQuery);
